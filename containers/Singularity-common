Bootstrap: debootstrap
OSVersion: bionic
MirrorURL: http://us.archive.ubuntu.com/ubuntu/

%environment
    export LC_ALL=C.UTF-8
    export LANG=C.UTF-8
    export LD_LIBRARY_PATH="/usr/local/lib:$LD_LIBRARY_PATH"

%post
    apt update
    apt install -y software-properties-common
    apt-add-repository universe
    apt update
    apt-get install -y git wget build-essential unzip autoconf automake zlib1g-dev libbz2-dev liblzma-dev libcurl4-gnutls-dev libssl-dev libncurses5-dev python3-pip

    pip3 install biopython

    VERSION="1.10"
    URL=https://github.com/samtools/samtools/releases/download/"$VERSION"/samtools-"$VERSION".tar.bz2
    wget "$URL" -O - | tar -jxf -
    cd samtools-"$VERSION" || exit 1
    ./configure --prefix=/usr/local
    make
    make install
    cd "$HOME" || exit 1
